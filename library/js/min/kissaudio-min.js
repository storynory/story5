!function(e,a,n){var t=0,o=["ms","moz","webkit","o"],r;for(r=0;r<o.length&&!e[a];++r)e[a]=e[o[r]+"RequestAnimationFrame"],e[n]=e[o[r]+"CancelAnimationFrame"]||e[o[r]+"CancelRequestAnimationFrame"];e[a]||(e[a]=function(a){var n=(new Date).getTime(),o=Math.max(0,16-(n-t)),r=e.setTimeout(function(){a(n+o)},o);return t=n+o,r}),e[n]||(e[n]=function(a){e.clearTimeout(a)})}(this,"requestAnimationFrame","cancelAnimationFrame"),function($){var e="ontouchstart"in window,a=e?"touchend":"click",n,t,o={init:function(){o.moveForward=o.setMoveForward},formatTime:function(e){var a;return e=Math.round(e),a=Math.floor(e/60),10>a&&(a="0"+a),e-=60*a,10>e&&(e="0"+e),a+":"+e},getDuration:function(e,a,n){var t;return $(a).attr("max",e.duration),t=o.formatTime(e.duration),$(n).text(t),$("span.duration").text(t)},playPause:function(e){return e.paused&&e.readyState>=1?e.play():e.pause()},update:function(e,a){var n;n=$(e).val(),n=o.formatTime(n),$(a).text(n)},moveForward:function(){},setMoveForward:function(e,a){var n=function(){$(a).val(e.currentTime)};requestAnimationFrame(n)},cancelMoveForward:function(){},buffered:function(e){var a;try{a=e.buffered.end(0)/e.duration*100;var n=function(){$(".buffer").css("background-image","linear-gradient( to right, #F5F5F5  "+a+"%, #69b07f  "+a+"% )")};requestAnimationFrame(n)}catch(t){}},scrubWhite:function(e,a){var n;n=e.currentTime/e.duration*100;var t=function(){$(a).css("background-image","linear-gradient( to right, white "+n+"%,   #EFD480 "+n+"% )")};requestAnimationFrame(t)},scrub:function(e,a){var n=$(a).val();e.currentTime=n;var t;if(t=e.currentTime/e.duration*100,e.buffered.end(0)>=e.currentTime){var o=function(){$(a).css("background-image","linear-gradient( to right, white "+t+"%,  #EFD480 "+t+"% )")};requestAnimationFrame(o)}},volume:function(e,a,n){var t;t=$(a).val(),e.volume=t/10,7.5>=t&&t>5&&$(n).removeClass("high").removeClass("low").addClass("medium"),t>=7.5&&$(n).removeClass("medium").addClass("high"),5>t&&t>=2.5&&$(n).removeClass("medium").removeClass("quiet").addClass("low"),2.5>t&&t>.1&&$(n).removeClass("mute").removeClass("low").addClass("quiet"),.1>=t&&$(n).removeClass("quiet").addClass("mute")},ready:function(e){$(e).removeClass("mute").addClass("high")}};o.init(),o.MoveForward=o.setMoveForward,$.fn.kissaudio=function(e){this.each(function(e){var n=$(this),i=$(r.audioRange,n),u=$(r.playPause,n),s=$(r.volumeRange,n),d=$(r.iconVolume,n),m=$(r.spanTime,n),c=$("a.playPause").eq(e+1),l=new Audio;l.src=$(u,this).attr("href"),$(u).on("click",function(){return 0===l.readyState&&(console.log(l.readyState),l.load()),o.playPause(l),l.addEventListener("timeupdate",function(){o.update(i,m)}),!1}),$(l).on("ended",function(){l.currentTime=0,$(c).trigger("click")}),$(i).on("input",function(){o.moveForward=o.cancelMoveForward(),o.update(i,m),o.scrub(l,i)}),$(s).on("input",function(){o.volume(l,s,d)}),$(i).on(a,function(){o.moveForward=o.setMoveForward,o.scrub(l,i)}),l.addEventListener("timeupdate",function(){o.update(m),o.MoveForward(l,i),o.scrubWhite(l,i)}),$(l).on("canplay",function(){o.ready(d)}),$(l).on("loadedmetadata",function(){o.getDuration(l,i,m)}),$(l).on("play",function(e){t!==e.target&&void 0!==t&&t.pause(),t=e.target,$(u).removeClass("play"),$(u).addClass("pause")}),$(l).on("pause",function(){$(r.playPause,n).removeClass("pause"),$(r.playPause,n).addClass("play")}),$(l).on("loadedmetadata",function(){o.getDuration(l,i)})})};var r=$.extend({playPause:"a.playPause",audioRange:".js-audioRange",volumeRange:".range-volume",iconVolume:".icon-volume",spanTime:".time"},n)}(window.jQuery||window.Zepto||window.$);