!function(e,a,n){var t=0,o=["ms","moz","webkit","o"],r;for(r=0;r<o.length&&!e[a];++r)e[a]=e[o[r]+"RequestAnimationFrame"],e[n]=e[o[r]+"CancelAnimationFrame"]||e[o[r]+"CancelRequestAnimationFrame"];e[a]||(e[a]=function(a){var n=(new Date).getTime(),o=Math.max(0,16-(n-t)),r=e.setTimeout(function(){a(n+o)},o);return t=n+o,r}),e[n]||(e[n]=function(a){e.clearTimeout(a)})}(this,"requestAnimationFrame","cancelAnimationFrame"),function($){var e=function(){try{var e=document.createElement("audio").canPlayType("audio/mpeg");if("probably"===e||"maybe"===e)return!0}catch(a){return!1}},a="ontouchstart"in window,n=a?"touchend":"click",t,o,r={init:function(){r.moveForward=r.setMoveForward},formatTime:function(e){var a;return e=Math.round(e),a=Math.floor(e/60),10>a&&(a="0"+a),e-=60*a,10>e&&(e="0"+e),a+":"+e},getDuration:function(e,a,n){var t;return $(a).attr("max",e.duration),t=r.formatTime(e.duration),$(n).text(t),$("span.duration").text(t)},playPause:function(e){try{return e.paused?e.play():e.pause()}catch(a){}},update:function(e,a){var n;n=$(e).val(),n=r.formatTime(n),$(a).text(n)},moveForward:function(){},setMoveForward:function(e,a){var n=function(){$(a).val(e.currentTime)};requestAnimationFrame(n)},cancelMoveForward:function(){},buffered:function(e){var a;try{a=e.buffered.end(0)/e.duration*100;var n=function(){$(".buffer").css("background-image","linear-gradient( to right, #F5F5F5  "+a+"%, #69b07f  "+a+"% )")};requestAnimationFrame(n)}catch(t){}},scrubWhite:function(e,a){var n;n=e.currentTime/e.duration*100;var t=function(){$(a).css("background-image","linear-gradient( to right, white "+n+"%,   #EFD480 "+n+"% )")};requestAnimationFrame(t)},scrub:function(e,a){try{var n=$(a).val();e.currentTime=n;var t;if(t=e.currentTime/e.duration*100,e.buffered.end(0)>=e.currentTime){var o=function(){$(a).css("background-image","linear-gradient( to right, white "+t+"%,  #EFD480 "+t+"% )")};requestAnimationFrame(o)}}catch(r){}},volume:function(e,a,n){var t;t=$(a).val(),e.volume=t/10,7.5>=t&&t>5&&$(n).removeClass("high").removeClass("low").addClass("medium"),t>=7.5&&$(n).removeClass("medium").addClass("high"),5>t&&t>=2.5&&$(n).removeClass("medium").removeClass("quiet").addClass("low"),2.5>t&&t>.1&&$(n).removeClass("mute").removeClass("low").addClass("quiet"),.1>=t&&$(n).removeClass("quiet").addClass("mute")},ready:function(e){$(e).removeClass("mute").addClass("high")}};r.init(),r.MoveForward=r.setMoveForward,$.fn.kissaudio=function(a){return e()===!1?!1:void this.each(function(e){var a=$(this),t=$(i.audioRange,a),u=$(i.playPause,a),d=$(i.volumeRange,a),s=$(i.iconVolume,a),c=$(i.spanTime,a),m=$(i.audioLoading,a),l=i.preload,f=$("a.playPause").eq(e+1),v=new Audio;v.preload=l,v.src=$(u,this).attr("href"),$(u).on("click",function(){return $(m).text("Loading"),r.playPause(v),v.addEventListener("timeupdate",function(){r.update(t,c)}),!1}),$(v).on("ended",function(){v.currentTime=0,$(f).trigger("click")}),$(t).on("input",function(){r.moveForward=r.cancelMoveForward(),r.update(t,c),r.scrub(v,t)}),$(d).on("input change",function(){r.volume(v,d,s)}),$(t).on(n,function(){r.moveForward=r.setMoveForward,r.scrub(v,t)}),v.addEventListener("timeupdate",function(){r.update(c),r.MoveForward(v,t),r.scrubWhite(v,t)}),$(v).on("canplay",function(){r.ready(s),$(m).fadeOut("slow")}),$(v).on("loadedmetadata",function(){r.getDuration(v,t,c)}),$(v).on("play",function(e){o!==e.target&&void 0!==o&&o.pause(),o=e.target,$(u).removeClass("play"),$(u).addClass("pause")}),$(v).on("pause",function(){$(i.playPause,a).removeClass("pause"),$(i.playPause,a).addClass("play")}),$(v).on("loadedmetadata",function(){r.getDuration(v,t)})})};var i=$.extend({playPause:"a.playPause",audioRange:".js-audioRange",volumeRange:".range-volume",iconVolume:".icon-volume",spanTime:".time",audioLoading:".audioLoading",preload:"none"},t)}(window.jQuery||window.Zepto||window.$);